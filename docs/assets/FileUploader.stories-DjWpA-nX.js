import{f as o,o as s,b as n,d as a,t as x,p as B,m as M,e as y}from"./vue.esm-bundler-C2J-SQPN.js";import{C as q}from"./ChatInput2-CYvq5w09.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"modal-overlay"},D={class:"modal-content"},O={key:0},$=["src"],j={key:1},W=["src"],L={key:2},R={class:"modal-actions"},V={__name:"PreviewModal",props:{previewUrl:{type:String,required:!0},isImage:{type:Boolean,default:!1},isVideo:{type:Boolean,default:!1},fileName:{type:String,default:""},handleSendEventFunction:{type:Function,required:!0}},emits:["close","upload"],setup(r,{emit:g}){const d=r,i=o(!1),l=()=>{d.handleSendEventFunction(),i.value=!1};return(v,u)=>(s(),n("div",C,[a("div",D,[u[0]||(u[0]=a("h3",null,"File Preview",-1)),d.isImage?(s(),n("div",O,[a("img",{src:r.previewUrl,alt:"Image Preview",class:"preview-image"},null,8,$)])):d.isVideo?(s(),n("div",j,[a("video",{src:r.previewUrl,controls:"",class:"preview-video"},null,8,W)])):(s(),n("div",L,[a("p",null,"Selected file: "+x(r.fileName),1)])),a("div",R,[B(q,{onSend:l})])])]))}},T=S(V,[["__scopeId","data-v-cd10e920"]]);V.__docgenInfo={exportName:"default",displayName:"PreviewModal",description:"",tags:{},props:[{name:"previewUrl",type:{name:"string"},required:!0},{name:"isImage",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isVideo",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"fileName",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"handleSendEventFunction",type:{name:"func"},required:!0}],events:[{name:"close"},{name:"upload"}],sourceFiles:["/home/sergey/Projects/@mobilon-dev/chotto/src/components/features/PreviewModal.vue"]};const A={key:0},z={key:1},G={key:2},I={__name:"FileUploader",props:{handleSendEventFunction:{type:Function,default:null}},emits:["file-uploaded"],setup(r,{emit:g}){const d=r,i=o(null),l=o(""),v=o(""),u=o(""),c=o(!1),p=o(!1),_=o(!1),N=g,U=t=>{console.log("onFileSelected",t.target.files[0]),i.value=t.target.files[0],i.value&&(k(),P(),_.value=!0)},k=()=>{const t=i.value,e=t.type;if(console.log(e),e.startsWith("image/")?(c.value=!0,p.value=!1):e.startsWith("video/")?(c.value=!1,p.value=!0):(c.value=!1,p.value=!1),c.value||p.value){const m=new FileReader;m.onload=b=>{u.value=b.target.result},m.readAsDataURL(t)}else u.value=""},P=async()=>{l.value="uploading";const t=new FormData;t.append("file",i.value);try{const m=await(await fetch("https://filebump.services.mobilon.ru/upload",{method:"POST",body:t})).json();v.value=m.url,l.value="success",N("file-uploaded",v.value)}catch(e){console.error("Ошибка при загрузке файла:",e),l.value="error"}},E=()=>{d.handleSendEventFunction({...v.value,type:"message.file"}),l.value="",_.value=!1};return(t,e)=>(s(),n("div",null,[a("input",{type:"file",onChange:U},null,32),l.value==="success"?(s(),n("div",A,[e[0]||(e[0]=a("p",null,"Файл загружен и готов к отправке.",-1)),_.value?(s(),M(T,{key:0,previewUrl:u.value,isImage:c.value,isVideo:p.value,fileName:i.value.name,handleSendEventFunction:E},null,8,["previewUrl","isImage","isVideo","fileName"])):y("",!0)])):l.value==="uploading"?(s(),n("div",z,e[1]||(e[1]=[a("p",null,"Загрузка файла...",-1)]))):l.value==="error"?(s(),n("div",G,e[2]||(e[2]=[a("p",null,"Ошибка при загрузке файла.",-1)]))):y("",!0)]))}},H=S(I,[["__scopeId","data-v-39479a94"]]);I.__docgenInfo={exportName:"default",displayName:"FileUploader",description:"",tags:{},props:[{name:"handleSendEventFunction",type:{name:"func"},defaultValue:{func:!1,value:"null"}}],events:[{name:"file-uploaded"}],sourceFiles:["/home/sergey/Projects/@mobilon-dev/chotto/src/components/features/FileUploader.vue"]};const X={component:H},f={args:{}};var h,F,w;f.parameters={...f.parameters,docs:{...(h=f.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {}
}`,...(w=(F=f.parameters)==null?void 0:F.docs)==null?void 0:w.source}}};const Y=["Standard"];export{f as Standard,Y as __namedExportsOrder,X as default};
